.model small      ; Модель памяти SMALL использует сегменты размером не более 64КБ
.stack 100h      ; Сегмент стека размером 100h (256 байт)
.186        ; Разрешаем использовать команды процессора 80186

.data        ; Начало сегмента данных
first_symbol db 41h; Строка, в которой находится код символа "A" по таблице ASCII
coloring db 0Ah    ; Строка с атрибутами символа (цвет и фон)

.code        ; Сегмент кода
start:        ; Точка входа в программу

mov AX, @data      ; Помещаем указатель на сегмент данных в AX
mov DS, AX      ; Помещаем указатель на сегмент данных в DS

mov AX, 0B800h      ; Используя сегментный регистр ES,
mov ES, AX      ; организовать запись данных в видеопамять по адресу B800h:0000h
; Теперь в ES у нас хранится адрес нулевой страницы экрана.

mov AH, 00h     ; Установка видеорежима (перевод экрана в текст. режим с номером 03)
mov AL, 03h     ; Стандартный цветной текстовый режим
int 10h    ; Вызвать обработчик прерывания

mov AH, 05h      ; Установка выводимой (текущей, активной) страницы
mov AL, 01h      ; Первая страница
int 10h        ; Вызвать обработчик прерывания

call B10DISPLAY    ; Вызов функции вывода символов на экран

mov AX, 4C00h      ; Код завершения программы
int 21h        ; Вызвать обработчик прерывания

B10DISPLAY proc
    pusha
    mov AL, first_symbol    ; Загружаем символ 'A' (код 41h) в AL
    mov AH, coloring        ; Загружаем атрибут цвета (0Ah — зеленый на черном) в AH
    mov DI, 830             ; Начальное смещение в видеопамяти: (строка * 80 + столбец) * 2
    mov CX, 5               ; Количество строк (5)

Row:
    push CX                 ; Сохраняем счетчик строк в стеке
    mov CX, 10              ; Количество столбцов (10)

Col:
    mov ES:word ptr[DI], AX ; Выводим символ с атрибутом в видеопамять
    add DI, 2               ; Переходим к следующей позиции (+2 байта)
    loop Col                ; Повторяем для всех столбцов в строке

    add DI, 140             ; Переход к началу следующей строки: (80 - 10) * 2 = 140
    pop CX                  ; Восстанавливаем счетчик строк
    inc AL                  ; Переходим к следующему символу (B, C, D, ...)
    inc AH                  ; Изменяем атрибут цвета (следующий цвет)
    loop Row                ; Повторяем для всех строк

    popa
    ret                     ; Возврат из процедуры

B10DISPLAY endp
end start
